<!doctype html>
<html>

<head>
    <title>Tilfeldig valg av elever</title>
    <meta charset="utf-8" />
    <!-- bruker CDN (Content Delivery Network) til å hente Bootstrap-stilarket-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <style>
    </style>

    <script>

    var antall_elever;
    var eksempel_elever = ['jon','åmund','erik','kjell','1234','asdfasfd','qwer'];
    var nytt_em;
    var tilfeldig_valgt_elev;
    var tilfeldig_index;
    var jobbe_liste_elever; // liste som det kan slettes elever fra under utvalg
    var em;

    window.onload = function () {
        antall_elever = document.getElementById('antall_elever');
        antall_elever.focus();  // fokuserer på inputfeltet
        document.getElementById('btn_elever').onclick = velg_elever;
        onkeydown = function (evt) {    // hvis brukeren trykker på enter
            if (evt.keyCode === 13 && antall_elever === document.activeElement) velg_elever();
        }
    }

    function velg_elever() {
        em = document.getElementById('elev_utvalg');
        while (em.lastChild) em.removeChild(em.lastChild);   // sletter alle child-elements
        // lager egen liste av elever til å hente og slette elementer fra
        jobbe_liste_elever = eksempel_elever.slice(0);
        antall = (+antall_elever.value < eksempel_elever.length ? +antall_elever.value : eksempel_elever.length);

        for (var i=0; i<antall; i++) {
            tilfeldig_index = Math.floor((Math.random() * jobbe_liste_elever.length));  // tilfeldig valg av 
            tilfeldig_valgt_elev = jobbe_liste_elever[tilfeldig_index];                 // elev fra klasse
            jobbe_liste_elever.splice(tilfeldig_index,1);
            // genererer nytt element
            nytt_em = document.createElement('div');
            nytt_em.innerHTML = "<p>"+tilfeldig_valgt_elev+"</p>";   
            nytt_em.className = 'col-3 p-1';
            document.getElementById('elev_utvalg').appendChild(nytt_em);
        }
    }

    </script>
</head>

<body>
    <!-- navigering -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    
        <a class="navbar-brand" href="/">Klasseadministrasjon</a>
    
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav_liste">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="nav_liste">
            <div class="navbar-nav">
                <a class="nav-item nav-link" href="/">index</a>
                <a class="nav-item nav-link" href="klassekart.html">Klassekart</a>
                <a class="nav-item nav-link" href="velge_tilfeldig_elev.html">Velg elev</a>
                <a class="nav-item nav-link" href="Gruppeinndeling.html">Gruppeinndeling</a>
                <a class="nav-item nav-link" href="Fravær.html">Fravær</a>
                <div class="dropdown">
                    <a class="nav-item nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown">
                        Administrer
                    </a>
                    <div class="dropdown-menu nav_undermeny">
                        <a class="dropdown-item" href="#">asdfasdf</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- hovedinnhold -->
    <div class='container'>
        <h1 class='my-5'>Tilfeldig valg av elever</h1>
        <div class="row">
            <label class="sr-only" for="antall_elever">antall_elever</label>
            <div class="input-group mb-2 col-8">
                <div class="input-group-prepend">
                    <div class="input-group-text">Skriv inn antall elever:</div>
                </div>
                <input type="number" id="antall_elever" class="form-control" min='1' value='1' 
                    placeholder="Antall tilfeldige elver som skal velges">
            </div>
            <button class='btn btn-lg btn-secondary' id='btn_elever'>Velg</button>
        </div>

        <h2>Elever:</h2>
        <div id='elev_utvalg' class='row justify-content-around'>
            <!-- genererte div-tagger -->
        </div>
    </div>


    <!-- javascripten under gjør at CDN fungerer og at elementer i bootstrap-pakka som bruker javascript fungerer -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
</body>

</html>